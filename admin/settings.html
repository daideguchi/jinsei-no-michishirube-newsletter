<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚·ã‚¹ãƒ†ãƒ è¨­å®š - äººç”Ÿã®é“æ¨™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .zen-gradient {
            background: linear-gradient(135deg, #2C5F41 0%, #4A7C59 100%);
        }
        .admin-sidebar {
            background: linear-gradient(180deg, #1f2937 0%, #374151 100%);
        }
        .setting-card {
            transition: all 0.3s ease;
        }
        .setting-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav class="admin-sidebar shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-2xl">ğŸ›¡ï¸</span>
                    <span class="ml-2 text-xl font-bold text-white">äººç”Ÿã®é“æ¨™ ç®¡ç†è€…ç”»é¢</span>
                </div>
                <div class="flex items-center space-x-6">
                    <a href="/admin/dashboard" class="text-gray-300 hover:text-white">ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a>
                    <a href="/admin/email-templates" class="text-gray-300 hover:text-white">âœ‰ï¸ ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</a>
                    <a href="/admin/subscribers" class="text-gray-300 hover:text-white">ğŸ‘¥ èª­è€…ç®¡ç†</a>
                    <a href="/admin/analytics" class="text-gray-300 hover:text-white">ğŸ“ˆ åˆ†æ</a>
                    <a href="/admin/settings" class="text-white font-semibold">âš™ï¸ è¨­å®š</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900">âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</h1>
            <p class="text-gray-600 mt-2">ãƒ¡ãƒ«ãƒã‚¬ã‚·ã‚¹ãƒ†ãƒ ã®å„ç¨®è¨­å®šã‚’ç®¡ç†</p>
        </div>

        <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="border-b border-gray-200 mb-8">
            <nav class="-mb-px flex space-x-8">
                <button onclick="showTab('brevo')" id="brevoTab" class="border-b-2 border-green-500 py-2 px-1 text-sm font-medium text-green-600">
                    ğŸ“§ Brevoè¨­å®š
                </button>
                <button onclick="showTab('sheets')" id="sheetsTab" class="border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700">
                    ğŸ“Š Google Sheetsè¨­å®š
                </button>
                <button onclick="showTab('automation')" id="automationTab" class="border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700">
                    ğŸ¤– è‡ªå‹•åŒ–è¨­å®š
                </button>
                <button onclick="showTab('security')" id="securityTab" class="border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700">
                    ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
                </button>
            </nav>
        </div>

        <!-- Brevoè¨­å®šã‚¿ãƒ– -->
        <div id="brevoContent" class="space-y-8">
            <!-- APIè¨­å®š -->
            <div class="setting-card bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6">ğŸ”‘ Brevo APIè¨­å®š</h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">APIã‚­ãƒ¼</label>
                        <div class="flex space-x-3">
                            <input type="password" id="brevoApiKey" class="flex-1 border-gray-300 rounded-lg px-3 py-2"
                                   placeholder="xkeysib-..." value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                            <button onclick="testBrevoApi()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                ğŸ§ª ãƒ†ã‚¹ãƒˆ
                            </button>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Brevoã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®è¨­å®š > APIã‚­ãƒ¼ã‹ã‚‰å–å¾—</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é€ä¿¡è€…å</label>
                        <input type="text" id="senderName" class="w-full border-gray-300 rounded-lg px-3 py-2"
                               value="äººç”Ÿã®é“æ¨™ - ãƒ‡ã‚¸ã‚¿ãƒ«ä¼½è—">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é€ä¿¡è€…ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                        <input type="email" id="senderEmail" class="w-full border-gray-300 rounded-lg px-3 py-2"
                               value="noreply@jinsei-michishirube.com">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒªã‚¹ãƒˆID</label>
                        <input type="number" id="defaultListId" class="w-full border-gray-300 rounded-lg px-3 py-2"
                               value="2" placeholder="Brevoã®ã‚³ãƒ³ã‚¿ã‚¯ãƒˆãƒªã‚¹ãƒˆID">
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t">
                    <h4 class="font-semibold text-gray-900 mb-4">ğŸ“Š æ¥ç¶šçŠ¶æ³</h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="p-4 bg-green-50 rounded-lg">
                            <div class="text-sm text-green-800 font-medium">APIæ¥ç¶š</div>
                            <div class="text-lg font-bold text-green-600" id="apiStatus">âœ… æ­£å¸¸</div>
                        </div>
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <div class="text-sm text-blue-800 font-medium">ä»Šæœˆé€ä¿¡æ•°</div>
                            <div class="text-lg font-bold text-blue-600" id="monthlyCount">342 / 9,000</div>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg">
                            <div class="text-sm text-purple-800 font-medium">æ®‹ã‚Šã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ</div>
                            <div class="text-lg font-bold text-purple-600" id="remainingCredits">8,658</div>
                        </div>
                    </div>
                </div>

                <div class="mt-6 flex space-x-4">
                    <button onclick="saveBrevoSettings()" class="zen-gradient text-white px-6 py-3 rounded-lg hover:opacity-90">
                        ğŸ’¾ è¨­å®šã‚’ä¿å­˜
                    </button>
                    <button onclick="syncBrevoContacts()" class="border border-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-50">
                        ğŸ”„ ã‚³ãƒ³ã‚¿ã‚¯ãƒˆåŒæœŸ
                    </button>
                </div>
            </div>

            <!-- ãƒ¡ãƒ¼ãƒ«é…ä¿¡è¨­å®š -->
            <div class="setting-card bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6">ğŸ“® ãƒ¡ãƒ¼ãƒ«é…ä¿¡è¨­å®š</h3>
                
                <div class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">é…ä¿¡æ™‚é–“</label>
                            <select class="w-full border-gray-300 rounded-lg">
                                <option value="10">10:00 (æ¨å¥¨)</option>
                                <option value="9">09:00</option>
                                <option value="11">11:00</option>
                                <option value="19">19:00</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</label>
                            <select class="w-full border-gray-300 rounded-lg">
                                <option value="Asia/Tokyo">Asia/Tokyo (JST)</option>
                                <option value="UTC">UTC</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">é…ä¿¡é »åº¦åˆ¶é™</label>
                        <div class="flex items-center space-x-4">
                            <input type="number" value="1" class="w-20 border-gray-300 rounded-lg px-3 py-2">
                            <span class="text-gray-600">é€š/æ—¥ (åŒä¸€èª­è€…ã¸ã®é…ä¿¡ä¸Šé™)</span>
                        </div>
                    </div>

                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" checked class="rounded border-gray-300 text-green-600">
                            <span class="ml-2 text-sm text-gray-700">ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒ¼ãƒ«è‡ªå‹•é€ä¿¡</span>
                        </label>
                    </div>

                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" checked class="rounded border-gray-300 text-green-600">
                            <span class="ml-2 text-sm text-gray-700">ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒ¼ãƒ«è‡ªå‹•é€ä¿¡</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Google Sheetsè¨­å®šã‚¿ãƒ– -->
        <div id="sheetsContent" class="space-y-8 hidden">
            <div class="setting-card bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6">ğŸ“Š Google Sheetsé€£æºè¨­å®š</h3>
                
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆID</label>
                        <input type="text" class="w-full border-gray-300 rounded-lg px-3 py-2"
                               value="1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2PztM" readonly>
                        <p class="text-xs text-gray-500 mt-1">Google Sheetsã®URLã‹ã‚‰è‡ªå‹•å–å¾—</p>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">APIã‚­ãƒ¼</label>
                        <div class="flex space-x-3">
                            <input type="password" class="flex-1 border-gray-300 rounded-lg px-3 py-2"
                                   value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" readonly>
                            <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                                ğŸ”„ æ›´æ–°
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">èª­è€…ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆå</label>
                            <input type="text" class="w-full border-gray-300 rounded-lg px-3 py-2" 
                                   value="newsletter_subscribers">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚·ãƒ¼ãƒˆå</label>
                            <input type="text" class="w-full border-gray-300 rounded-lg px-3 py-2" 
                                   value="Email_Templates">
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">åŒæœŸé–“éš”</label>
                        <select class="w-full border-gray-300 rounded-lg">
                            <option value="5">5åˆ†ã”ã¨</option>
                            <option value="15" selected>15åˆ†ã”ã¨ (æ¨å¥¨)</option>
                            <option value="30">30åˆ†ã”ã¨</option>
                            <option value="60">1æ™‚é–“ã”ã¨</option>
                        </select>
                    </div>
                </div>

                <div class="mt-8 pt-6 border-t">
                    <h4 class="font-semibold text-gray-900 mb-4">ğŸ“ˆ åŒæœŸçŠ¶æ³</h4>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="p-4 bg-green-50 rounded-lg">
                            <div class="text-sm text-green-800 font-medium">æœ€çµ‚åŒæœŸ</div>
                            <div class="text-sm font-bold text-green-600">5åˆ†å‰</div>
                        </div>
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <div class="text-sm text-blue-800 font-medium">ç·èª­è€…æ•°</div>
                            <div class="text-sm font-bold text-blue-600">1,247å</div>
                        </div>
                        <div class="p-4 bg-purple-50 rounded-lg">
                            <div class="text-sm text-purple-800 font-medium">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ•°</div>
                            <div class="text-sm font-bold text-purple-600">4å€‹</div>
                        </div>
                        <div class="p-4 bg-yellow-50 rounded-lg">
                            <div class="text-sm text-yellow-800 font-medium">ã‚¨ãƒ©ãƒ¼æ•°</div>
                            <div class="text-sm font-bold text-yellow-600">0ä»¶</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è‡ªå‹•åŒ–è¨­å®šã‚¿ãƒ– -->
        <div id="automationContent" class="space-y-8 hidden">
            <div class="setting-card bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6">ğŸ¤– è‡ªå‹•åŒ–è¨­å®š</h3>
                
                <div class="space-y-6">
                    <div>
                        <h4 class="font-semibold text-gray-900 mb-4">ğŸ“§ ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒ¼ãƒ«è¨­å®š</h4>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 border rounded-lg">
                                <div>
                                    <div class="font-medium">Day 1 - å¿ƒã‚’æ•´ãˆã‚‹æ™ºæ…§</div>
                                    <div class="text-sm text-gray-600">ç™»éŒ²ã‹ã‚‰1æ—¥å¾Œã«é€ä¿¡</div>
                                </div>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-green-600">
                                    <span class="ml-2 text-sm">æœ‰åŠ¹</span>
                                </label>
                            </div>

                            <div class="flex items-center justify-between p-4 border rounded-lg">
                                <div>
                                    <div class="font-medium">Day 3 - äººé–“é–¢ä¿‚ã®æ™ºæ…§</div>
                                    <div class="text-sm text-gray-600">ç™»éŒ²ã‹ã‚‰3æ—¥å¾Œã«é€ä¿¡</div>
                                </div>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-green-600">
                                    <span class="ml-2 text-sm">æœ‰åŠ¹</span>
                                </label>
                            </div>

                            <div class="flex items-center justify-between p-4 border rounded-lg">
                                <div>
                                    <div class="font-medium">Day 7 - ä¸€é€±é–“ã®æŒ¯ã‚Šè¿”ã‚Š</div>
                                    <div class="text-sm text-gray-600">ç™»éŒ²ã‹ã‚‰7æ—¥å¾Œã«é€ä¿¡</div>
                                </div>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-green-600">
                                    <span class="ml-2 text-sm">æœ‰åŠ¹</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-semibold text-gray-900 mb-4">â° é…ä¿¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">å®Ÿè¡Œé–“éš”</label>
                                <select class="w-full border-gray-300 rounded-lg">
                                    <option value="hourly" selected>1æ™‚é–“ã”ã¨</option>
                                    <option value="daily">1æ—¥1å›</option>
                                    <option value="manual">æ‰‹å‹•ã®ã¿</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">æœ€å¤§é€ä¿¡æ•°/å›</label>
                                <input type="number" value="50" class="w-full border-gray-300 rounded-lg px-3 py-2">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">é€ä¿¡é–“éš”(ç§’)</label>
                                <input type="number" value="2" class="w-full border-gray-300 rounded-lg px-3 py-2">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚¿ãƒ– -->
        <div id="securityContent" class="space-y-8 hidden">
            <div class="setting-card bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold text-gray-900 mb-6">ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š</h3>
                
                <div class="space-y-6">
                    <div>
                        <h4 class="font-semibold text-gray-900 mb-4">ğŸ” ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                                <div class="flex space-x-3">
                                    <input type="password" class="flex-1 border-gray-300 rounded-lg px-3 py-2"
                                           placeholder="æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
                                    <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                                        ğŸ”„ å¤‰æ›´
                                    </button>
                                </div>
                            </div>

                            <div>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-green-600">
                                    <span class="ml-2 text-sm text-gray-700">2æ®µéšèªè¨¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹</span>
                                </label>
                            </div>

                            <div>
                                <label class="flex items-center">
                                    <input type="checkbox" class="rounded border-gray-300 text-green-600">
                                    <span class="ml-2 text-sm text-gray-700">IPã‚¢ãƒ‰ãƒ¬ã‚¹åˆ¶é™ã‚’æœ‰åŠ¹ã«ã™ã‚‹</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-semibold text-gray-900 mb-4">ğŸ“ ç›£æŸ»ãƒ­ã‚°</h4>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <div class="text-sm space-y-2">
                                <div class="flex justify-between">
                                    <span>ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</span>
                                    <span class="text-gray-600">2025-07-26 18:30</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Brevoè¨­å®šå¤‰æ›´</span>
                                    <span class="text-gray-600">2025-07-26 15:22</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ›´æ–°</span>
                                    <span class="text-gray-600">2025-07-26 12:45</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-semibold text-gray-900 mb-4">ğŸ”„ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="p-4 border rounded-lg">
                                <div class="font-medium mb-2">è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</div>
                                <div class="text-sm text-gray-600 mb-3">æ¯æ—¥åˆå‰2æ™‚ã«å®Ÿè¡Œ</div>
                                <label class="flex items-center">
                                    <input type="checkbox" checked class="rounded border-gray-300 text-green-600">
                                    <span class="ml-2 text-sm">æœ‰åŠ¹</span>
                                </label>
                            </div>
                            
                            <div class="p-4 border rounded-lg">
                                <div class="font-medium mb-2">æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—</div>
                                <div class="text-sm text-gray-600 mb-3">æœ€çµ‚: 2025-07-26 02:00</div>
                                <button class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded">
                                    ä»Šã™ãå®Ÿè¡Œ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
        function showTab(tabName) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éš ã™
            document.getElementById('brevoContent').classList.add('hidden');
            document.getElementById('sheetsContent').classList.add('hidden');
            document.getElementById('automationContent').classList.add('hidden');
            document.getElementById('securityContent').classList.add('hidden');
            
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('brevoTab').className = 'border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700';
            document.getElementById('sheetsTab').className = 'border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700';
            document.getElementById('automationTab').className = 'border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700';
            document.getElementById('securityTab').className = 'border-b-2 border-transparent py-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700';
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’è¡¨ç¤º
            document.getElementById(tabName + 'Content').classList.remove('hidden');
            document.getElementById(tabName + 'Tab').className = 'border-b-2 border-green-500 py-2 px-1 text-sm font-medium text-green-600';
        }

        // Brevo API ãƒ†ã‚¹ãƒˆ
        async function testBrevoApi() {
            try {
                const response = await fetch('/api/admin/test-brevo');
                const result = await response.json();
                
                if (result.success) {
                    document.getElementById('apiStatus').innerHTML = 'âœ… æ­£å¸¸';
                    document.getElementById('monthlyCount').textContent = `${result.sent} / ${result.limit}`;
                    alert('âœ… Brevo APIæ¥ç¶šæˆåŠŸ');
                } else {
                    document.getElementById('apiStatus').innerHTML = 'âŒ ã‚¨ãƒ©ãƒ¼';
                    alert('âŒ æ¥ç¶šå¤±æ•—: ' + result.error);
                }
            } catch (error) {
                alert('âŒ ãƒ†ã‚¹ãƒˆå¤±æ•—: ' + error.message);
            }
        }

        // è¨­å®šä¿å­˜
        async function saveBrevoSettings() {
            const settings = {
                apiKey: document.getElementById('brevoApiKey').value,
                senderName: document.getElementById('senderName').value,
                senderEmail: document.getElementById('senderEmail').value,
                defaultListId: document.getElementById('defaultListId').value
            };

            try {
                const response = await fetch('/api/admin/brevo-settings', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(settings)
                });

                const result = await response.json();
                alert(result.success ? 'âœ… è¨­å®šä¿å­˜å®Œäº†' : 'âŒ ä¿å­˜å¤±æ•—: ' + result.error);
            } catch (error) {
                alert('âŒ ä¿å­˜å¤±æ•—: ' + error.message);
            }
        }

        // ã‚³ãƒ³ã‚¿ã‚¯ãƒˆåŒæœŸ
        async function syncBrevoContacts() {
            try {
                const response = await fetch('/api/admin/sync-contacts', { method: 'POST' });
                const result = await response.json();
                alert(result.success ? 'âœ… åŒæœŸå®Œäº†' : 'âŒ åŒæœŸå¤±æ•—: ' + result.error);
            } catch (error) {
                alert('âŒ åŒæœŸå¤±æ•—: ' + error.message);
            }
        }

        // åˆæœŸåŒ–
        window.onload = function() {
            showTab('brevo');
        };
    </script>
</body>
</html>